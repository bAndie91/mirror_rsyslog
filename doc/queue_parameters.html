<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>rsyslog queues parameters</title></head>
<body>
<a href="rsyslog_conf_global.html">back</a>
<p><h2>General Queue Parameters</h2></p>
<p>Queue parameters can be used together with the following statements:
<ul>
<li><a href="rsyslog_conf_actions.html">action()</a>
<li>ruleset()</a>
<li>main_queue()</a>
</ul>
<p>
Queues need to be configured in the action or ruleset it should affect. If nothing is configured, 
default values will be used. Thus, the default ruleset has only the default main queue. Specific Action 
queues are not set up by default.</p>
<ul>
	<li><strong>queue.filename</strong> name<br>
		File name to be used for the queue files. Please note that
		this is actually just the file name. A directory can NOT be
		specified in this paramter. If the files shall be
		created in a specific directory, specify
		queue.spoolDirectory for this. The filename is used to build 
		to complete path for queue files.</li>
	<li><strong>queue.spoolDirectory</strong> name<br>
		This is the directory into which queue files will be stored.
		Note that the directory must exist, it is NOT automatically
		created by rsyslog. If no spoolDirectory is specified, the
		work directory is used.
		</li>
	<li><strong>queue.size</strong> number <br>
		This is the maximum size of the queue in number of messages.
		Note that setting the queue size to very small values (roughly
		below 100 messages) is not supported and can lead to 
		unpredictable results.<br>
		For more information on the current status of this restriction
		see the <a href="http://www.rsyslog.com/lower-bound-for-queue-sizes/">rsyslog
		FAQ: "lower bound for queue sizes"</a>.</li>
	<li><strong>queue.dequeuebatchsize</strong> number 
	<br>default 16</li>
	<li><strong>queue.maxdiskspace</strong> number
	<br>The maximum size that all queue files together will use on disk.
	Note that the actual size may be slightly larger than the configured max, as
	rsyslog never writes partial queue records.
	<li><strong>queue.highwatermark</strong> number
	<br>This applies to disk-assisted queues, only.
	When the queue fills up to this number of messages, the queue begins
	to spool messages to disk. Please note that this should note happen as
	part of usual processing, because disk queue mode is very considerably
	slower than in-memory queue mode. Going to disk should be reserved for
	cases where an output action destination is offline for some period.
	<li><strong>queue.lowwatermark</strong> number
	<br>default 2000</li>
	<li><strong>queue.fulldelaymark</strong> number</br>
	Number of messages when the queue should block delayable messages. Messages
	are NO LONGER PROCESSED until the queue has sufficient space again. If
	a message is delayable depends on the input. For example, messages
	received via imtcp are delayable (because TCP can push back), but those
	received via imudp are not (as UDP does not permit a push back). The
	intent behind this setting is to leave some space in an almost-full
	queue for non-delayable messages, which would be lost if the queue runs
	out of space.</br></br>
	Please note that if you use a DA queue, setting the fulldelaymark ABOVE the
	highwatermark makes the queue never activate disk mode for delayable
	inputs. So this is probably not what you want.
	</li>
	<li><strong>queue.lightdelaymark</strong> number</li>
	<li><strong>queue.discardmark</strong> number
	<br>default 9750]</li>
	<li><strong>queue.discardseverity</strong> number
	<br>*numerical* severity! default 8 (nothing discarded)</li>
	<li><strong>queue.checkpointinterval</strong> number</li>
	<li><strong>queue.syncqueuefiles</strong> on/off</li>
	<li><strong>queue.type</strong> [FixedArray/LinkedList/<b>Direct</b>/Disk]</li>
	<li><strong>queue.workerthreads</strong> number
	<br>number of worker threads, default 1, recommended 1</li>
	<li><strong>queue.timeoutshutdown</strong> number
	<br>number is timeout in ms (1000ms is 1sec!), default 0 (indefinite)</li>
	<li><strong>queue.timeoutactioncompletion</strong> number
	<br>number is timeout in ms (1000ms is 1sec!), default 1000, 0 means immediate!</li>
	<li><strong>queue.timeoutenqueue</strong> number
	<br>number is timeout in ms (1000ms is 1sec!), default 2000, 0 means indefinite</li>
	<li><strong>queue.timeoutworkerthreadshutdown</strong> number
	<br>number is timeout in ms (1000ms is 1sec!), default 60000 (1 minute)</li>
	<li><strong>queue.workerthreadminimummessages</strong> number
	<br>default 100</li>
	<li><strong>queue.maxfilesize</strong> size_nbr
	<br> default 1m</li>
	<li><strong>queue.saveonshutdown</strong> on/<b>off</b></li>
	<li><strong>queue.dequeueslowdown</strong> number
	<br>number is timeout in microseconds (1000000us is 1sec!), default 0 (no delay). Simple rate-limiting!</li>
	<li><strong>queue.dequeuetimebegin</strong> number</li>
	<li><strong>queue.dequeuetimeend</strong> number</li>
</ul>
<p><b>Sample:</b></p>
<p>The following is a sample of a TCP forwarding action with its own queue.</p>
<textarea rows="7" cols="60">action(type="omfwd" 
       target="192.168.2.11"
       port="10514"
       protocol="tcp"
       queue.filename="forwarding"
       queue.size="1000000"
       queue.type="LinkedList"
)
</textarea>
<br><br>
[<a href="manual.html">manual index</a>]
[<a href="rsyslog_conf.html">rsyslog.conf</a>]
[<a href="http://www.rsyslog.com/">rsyslog site</a>]</p>
<p><font size="2">This documentation is part of the
<a href="http://www.rsyslog.com/">rsyslog</a> project.<br>
Copyright &copy; 2013 by <a href="http://www.gerhards.net/rainer">Rainer Gerhards</a> and
<a href="http://www.adiscon.com/">Adiscon</a>. Released under the GNU GPL
version 3 or higher.</font></p>

</body></html>
